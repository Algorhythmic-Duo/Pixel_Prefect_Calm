"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5643],{54154:function(e,t,n){var r,a=n(93981);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.Z=function(e){return a.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:96,height:96,viewBox:"0 0 96 96"},e),r||(r=a.createElement("path",{d:"M81.1185,72.2985 L14.8815,72.2985 C13.5685,72.2985 12.4995,71.2305 12.4995,69.9165 L12.4995,43.7015 L83.5005,43.7015 L83.5005,69.9165 C83.5005,71.2305 82.4315,72.2985 81.1185,72.2985 M14.8815,23.7015 L81.1185,23.7015 C82.4315,23.7015 83.5005,24.7695 83.5005,26.0835 L83.5005,31.7015 L12.4995,31.7015 L12.4995,26.0835 C12.4995,24.7695 13.5685,23.7015 14.8815,23.7015 M81.1185,19.7015 L14.8815,19.7015 C11.3625,19.7015 8.4995,22.5645 8.4995,26.0835 L8.4995,69.9165 C8.4995,73.4355 11.3625,76.2985 14.8815,76.2985 L81.1185,76.2985 C84.6375,76.2985 87.5005,73.4355 87.5005,69.9165 L87.5005,26.0835 C87.5005,22.5645 84.6375,19.7015 81.1185,19.7015",fill:"#000000",fillRule:"evenodd"})))}},85643:function(e,t,n){n.d(t,{Z:function(){return purchase_PurchaseForm}});var r,a,i,o,s,l=n(29541),c=n(93981),d=n(89898),u=n(22964),p=n(57982),m=n(50231),h=n(26498),y=n(17891),g=n(53606),f=n(23734),C=n(99677),b=n(17905),P=n(57396);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _templateObject(){let e=(0,b._)(["\n	height: 55px;\n\n	"," {\n		height: 52px;\n	}\n\n	"," {\n		height: 55px;\n	}\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,b._)(["\n	width: 42px;\n\n	"," {\n		width: 54px;\n	}\n\n	"," {\n		width: 57px;\n	}\n"]);return _templateObject1=function(){return e},e}let _=(0,P.ZP)(p.zx).withConfig({componentId:"sc-f24434c9-0"})(_templateObject(),(0,p.QR)("tablet"),(0,p.QR)("desktop")),v=(0,P.ZP)(function(e){return c.createElement("svg",_extends({width:57,height:24,viewBox:"0 0 57 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{d:"M10.6927 3.09493C11.3588 2.26179 11.8108 1.14314 11.6916 0C10.7165 0.0484845 9.52664 0.643285 8.83776 1.47708C8.21921 2.19109 7.67175 3.35659 7.81448 4.4518C8.90904 4.54675 10.0026 3.90469 10.6927 3.09493Z",fill:"white"})),a||(a=c.createElement("path",{d:"M11.6792 4.66564C10.0896 4.57096 8.73807 5.5678 7.97897 5.5678C7.21945 5.5678 6.05702 4.71336 4.79976 4.73639C3.16335 4.76042 1.64495 5.68566 0.814545 7.15722C-0.893461 10.1011 0.363803 14.4678 2.02475 16.8654C2.83134 18.0516 3.80342 19.3577 5.08429 19.3107C6.29449 19.2633 6.76884 18.5271 8.2399 18.5271C9.70987 18.5271 10.1372 19.3107 11.4182 19.287C12.7467 19.2632 13.5773 18.1002 14.3839 16.9129C15.3092 15.5607 15.688 14.2551 15.7118 14.1834C15.688 14.1597 13.1501 13.1861 13.1265 10.2667C13.1026 7.82228 15.1191 6.65956 15.214 6.58746C14.0752 4.90326 12.296 4.71336 11.6792 4.66564Z",fill:"white"})),i||(i=c.createElement("path",{d:"M25.5198 1.35749C28.9747 1.35749 31.3805 3.73898 31.3805 7.20625C31.3805 10.6859 28.9252 13.0798 25.4332 13.0798H21.608V19.163H18.8442V1.35748H25.5198V1.35749ZM21.608 10.7599H24.7792C27.1854 10.7599 28.5549 9.46446 28.5549 7.21863C28.5549 4.97304 27.1854 3.68971 24.7915 3.68971H21.608V10.7599Z",fill:"white"})),o||(o=c.createElement("path",{d:"M32.1022 15.4737C32.1022 13.2031 33.8421 11.8088 36.9271 11.636L40.4805 11.4264V10.427C40.4805 8.98323 39.5057 8.1195 37.8772 8.1195C36.3345 8.1195 35.372 8.8597 35.1378 10.0197H32.6206C32.7687 7.67514 34.7674 5.94769 37.9758 5.94769C41.1222 5.94769 43.1334 7.6135 43.1334 10.2171V19.163H40.5791V17.0283H40.5177C39.7651 18.4721 38.1238 19.3851 36.4211 19.3851C33.8792 19.3851 32.1022 17.8056 32.1022 15.4737ZM40.4805 14.3015V13.2773L37.2846 13.4746C35.6928 13.5858 34.7922 14.2891 34.7922 15.3996C34.7922 16.5347 35.7299 17.2751 37.1613 17.2751C39.0244 17.2751 40.4805 15.9918 40.4805 14.3015Z",fill:"white"})),s||(s=c.createElement("path",{d:"M45.5448 23.9384V21.7789C45.7419 21.8282 46.186 21.8282 46.4083 21.8282C47.6421 21.8282 48.3085 21.3101 48.7155 19.9775C48.7155 19.9527 48.9502 19.1878 48.9502 19.1754L44.2615 6.18213H47.1485L50.4311 16.7446H50.4801L53.7627 6.18213H56.5759L51.7139 19.8416C50.6039 22.9882 49.3205 24 46.6306 24C46.4083 24 45.7419 23.9752 45.5448 23.9384Z",fill:"white"})))}).withConfig({componentId:"sc-f24434c9-1"})(_templateObject1(),(0,p.QR)("tablet"),(0,p.QR)("desktop"));var purchase_ApplePayButton=e=>{let{children:t,onClick:n,isLoading:r,isDisabled:a,requestInfo:i,onCancel:o,onSubmit:s,onSuccess:d,onError:u,setIsApplePayAvailable:p}=e,m=(0,f.useStripe)(),{paymentFormPrice:h,paymentFormCurrency:y}=(0,C.K)(),[g,b]=(0,c.useState)(),[P,x]=(0,c.useState)(),initPaymentRequest=async()=>{if(!m)return;let e=m.paymentRequest({country:"US",currency:y.toLocaleLowerCase(),total:{label:"Calm Premium",amount:h},requestPayerName:!0,requestPayerEmail:!0,requestShipping:!0});try{let t=await e.canMakePayment();t?(p(!0),b(e),x(t),e.on("shippingaddresschange",async e=>{e.updateWith({status:"success",shippingOptions:[{id:"digital-subscription",label:"Digital Subscription",detail:"Arrives immediately",amount:0}],total:{label:"Calm Premium",amount:h}})}),e.on("paymentmethod",async e=>{let{paymentMethod:t,shippingAddress:n}=e;if(!t)return;let r=await s({requestInfo:i,paymentType:"apple_pay",token:t,customerAddress:{postalCode:null==n?void 0:n.postalCode,region:null==n?void 0:n.region,country:null==n?void 0:n.country}});if(null==r?void 0:r.error)e.complete("fail"),u(r.error);else{var a,o;e.complete("success"),await d(null!==(o=null===(a=r.success)||void 0===a?void 0:a.subscription)&&void 0!==o?o:r.success,"apple_pay")}}),e.on("cancel",()=>o({},"apple_pay"))):(b(null),p(!1))}catch(e){x(null),p(!1)}};return((0,c.useEffect)(()=>{initPaymentRequest().catch(()=>{p(!1)})},[m]),null==P?void 0:P.applePay)?(0,l.jsxs)(_,{fullWidth:!0,isLoading:r,backgroundColor:"black",onPress:()=>{g&&(n(),g.show())},isDisabled:a,children:[t,(0,l.jsx)(v,{})]}):null},x=n(22237),S=n(76380);let w={apiVersion:2,apiVersionMinor:0},j={type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:["MASTERCARD","VISA","AMEX"]}},D={...j,tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe","stripe:version":"2018-10-31","stripe:publishableKey":"pk_live_kRNwbiiuKQjv7hVfpJW3GhIS"}}};var M=n(38039);function styles_templateObject(){let e=(0,b._)(["\n	margin-bottom: 8px;\n	position: relative;\n"]);return styles_templateObject=function(){return e},e}function styles_templateObject1(){let e=(0,b._)(["\n	height: 55px;\n	left: 0;\n	position: absolute;\n	top: 0;\n	z-index: 1;\n"]);return styles_templateObject1=function(){return e},e}function _templateObject2(){let e=(0,b._)(["\n	opacity: ",";\n	position: relative;\n	pointer-events: ",";\n	transition: ",";\n\n	& .google-pay-button button {\n		border: 1px "," solid;\n		box-shadow: none;\n		border-radius: 100px;\n		height: 55px;\n		padding: 14px 15% !important;\n		width: 100%;\n\n		"," {\n			height: 52px;\n		}\n\n		"," {\n			height: 55px;\n			padding: 14px 15% !important;\n		}\n\n		&:after {\n			content: '';\n			margin: 0;\n			opacity: 0;\n		}\n\n		&.focus {\n			outline: none;\n			&:after {\n				content: '';\n				display: block;\n				position: absolute;\n				top: 0;\n				left: 0;\n				right: 0;\n				bottom: 0;\n				border: "," solid ",";\n				border-radius: ",";\n				transition: margin ",", opacity ",";\n				margin: ",";\n				opacity: 1;\n			}\n		}\n	}\n"]);return _templateObject2=function(){return e},e}let O=P.ZP.div.withConfig({componentId:"sc-cf187734-0"})(styles_templateObject()),T=(0,P.ZP)(p.zx).withConfig({componentId:"sc-cf187734-1"})(styles_templateObject1()),k=P.ZP.div.withConfig({componentId:"sc-cf187734-2"})(_templateObject2(),e=>e.isDisabled?"0.75":"1",e=>e.isDisabled?"none":"auto",(0,M.rS)("animation.transition"),(0,M.DG)("gray2"),(0,p.QR)("tablet"),(0,p.QR)("desktop"),(0,M.rS)("buttons.focusRingWidth"),(0,M.DG)("focusRingDark"),(0,M.rS)("buttons.borderRadius"),(0,M.rS)("animation.transition"),(0,M.rS)("animation.transition"),(0,M.rS)("buttons.focusRingDistance"));var purchase_GooglePayButton=e=>{let{children:t,onClick:n,onSubmit:r,isLoading:a,isDisabled:i,onCancel:o,requestInfo:s,onSuccess:d,onError:u,setIsGooglePayAvailable:p,shouldUsePaymentFormPrice:m=!1,buttonBackgroundColor:h="black"}=e,{paymentFormCurrency:y,paymentFormPrice:g}=(0,C.K)(),f=(0,x.K0)(),{plan:b,purchaseType:P}=(0,x.Fd)(),_=(0,x.ec)(),v=(0,c.useRef)(null),M=(0,c.useRef)(null),E=(0,c.useRef)(null),[L,R]=(0,c.useState)(!0),F="0.00",A=b,processGoogleRequest=async(e,t)=>{let n=await r({requestInfo:s,token:e,paymentType:"google_pay",customerAddress:t,plan:A});if(null==n?void 0:n.error)u(n.error);else{var a,i;await d(null!==(i=null===(a=n.success)||void 0===a?void 0:a.subscription)&&void 0!==i?i:n.success,"google_pay")}},onPaymentDataChanged=async()=>({newTransactionInfo:{totalPriceStatus:"FINAL",totalPriceLabel:"Total",totalPrice:F,currencyCode:y,countryCode:"US"}}),onPaymentAuthorized=async e=>{var t,n,r,a,i;let o=JSON.parse(null==e?void 0:null===(n=e.paymentMethodData)||void 0===n?void 0:null===(t=n.tokenizationData)||void 0===t?void 0:t.token);try{return await processGoogleRequest(o,{postalCode:null===(r=e.shippingAddress)||void 0===r?void 0:r.postalCode,region:null===(a=e.shippingAddress)||void 0===a?void 0:a.administrativeArea,country:null===(i=e.shippingAddress)||void 0===i?void 0:i.countryCode}),{transactionState:"SUCCESS"}}catch(e){return{transactionState:"SUCCESS"}}},getGooglePaymentsClient=()=>new window.google.payments.api.PaymentsClient({environment:"PRODUCTION",paymentDataCallbacks:{onPaymentAuthorized,onPaymentDataChanged}}),I=(0,c.useCallback)(e=>{if(m)return(g/100).toString();let t=(0,S.ds)(_)&&(null==P?void 0:P.type)==="freetrial";return t?"0.00":(f.current[e]/100).toString()},[m,_,null==P?void 0:P.type,f,g]),onGooglePaymentButtonClicked=async e=>{let t=I(e);F=t,A=e;let n={...w,allowedPaymentMethods:[D],transactionInfo:{totalPriceStatus:"ESTIMATED",totalPriceLabel:"Total",totalPrice:t,currencyCode:y,countryCode:"US"},merchantInfo:{merchantId:"BCR2DN6T2O6NJSLH",merchantName:"Calm"},shippingAddressRequired:!0,callbackIntents:["PAYMENT_AUTHORIZATION","SHIPPING_ADDRESS"]},r=getGooglePaymentsClient();try{await r.loadPaymentData(n)}catch(e){o(e,"google_pay")}},addPaymentButtons=()=>{if(!(null==v?void 0:v.current)||!(null==M?void 0:M.current))return;let e=getGooglePaymentsClient();[["monthly",v],["yearly",M],["lifetime",E]].forEach(t=>{let[n,r]=t,a=e.createButton({onClick:()=>onGooglePaymentButtonClicked(n),buttonColor:h,buttonType:"plain",buttonSizeMode:"fill"});a.className="google-pay-button",r.current.appendChild(a),n!==b&&(r.current.hidden=!0)})},onGooglePayLoaded=async()=>{let e=getGooglePaymentsClient(),t={...w,existingPaymentMethodRequired:!0,allowedPaymentMethods:[j]},n=await e.isReadyToPay(t);(null==n?void 0:n.paymentMethodPresent)?(addPaymentButtons(),p(!0)):(R(!1),p(!1))};return((0,c.useEffect)(()=>{let e=document.createElement("script");e.src="https://pay.google.com/gp/p/js/pay.js",e.async=!0,e.onload=onGooglePayLoaded,document.body.appendChild(e)},[]),(0,c.useEffect)(()=>{v.current&&M.current&&("monthly"===b?(v.current.hidden=!1,M.current.hidden=!0):(v.current.hidden=!0,M.current.hidden=!1))},[b,v,M]),L)?(0,l.jsx)(O,{onClick:()=>{i||n()},children:a?(0,l.jsx)(T,{fullWidth:!0,isLoading:!0,borderColor:"gray2",loaderColor:"black"===h?"white":"gray2",backgroundColor:"black"===h?"black":"white",isDisabled:i}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{isDisabled:i,ref:M,activePlan:b,buttonPlan:"yearly",children:t}),(0,l.jsx)(k,{isDisabled:i,ref:v,activePlan:b,buttonPlan:"monthly",children:t}),(0,l.jsx)(k,{isDisabled:i,ref:E,activePlan:b,buttonPlan:"lifetime",children:t})]})}):null},E=n(14428),L=n(38742),R=(0,L.vU)({heading:{id:"purchase.paymentTypeSelector.heading",defaultMessage:"Choose a payment method:",description:"Heading for payment selector"},testHeading:{id:"paymentTypeSelector.heading",defaultMessage:"Use an express option:",description:"Heading for where user selects a third party payment provider"},ccButtonLabel:{id:"purchase.paymentTypeSelector.ccButtonLabel",defaultMessage:"Credit or Debit",description:"Label for button to select credit card form"},or:{id:"purchase.paymentTypeSelector.or",defaultMessage:"Or",description:"a seperating word to express choice"}}),F=n(14827),A=n(54154);function PaymentTypeSelector_styles_templateObject(){let e=(0,b._)(["\n	color: ",";\n	margin: 24px 0;\n"]);return PaymentTypeSelector_styles_templateObject=function(){return e},e}function PaymentTypeSelector_styles_templateObject1(){let e=(0,b._)(["\n	display: flex;\n	justify-content: space-between;\n	margin-top: 10px;\n\n	& > div {\n		flex: 1;\n		margin-left: 5px;\n		margin-right: 5px;\n		&:first-child {\n			margin-left: 0;\n		}\n		&:last-child {\n			margin-right: 0;\n		}\n	}\n"]);return PaymentTypeSelector_styles_templateObject1=function(){return e},e}function styles_templateObject2(){let e=(0,b._)(["\n	&& {\n		border: 2px "," solid;\n		margin-top: 10px;\n		position: relative;\n	}\n"]);return styles_templateObject2=function(){return e},e}function _templateObject3(){let e=(0,b._)(["\n	position: absolute;\n	left: 18px;\n	height: 18px;\n	top: 50%;\n	transform: translateY(-50%);\n	width: 18px;\n	z-index: 9999;\n\n	path {\n		fill: ",";\n	}\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,b._)(["\n	height: 24px;\n	margin-right: 10px;\n	width: 24px;\n"]);return _templateObject4=function(){return e},e}let I=(0,P.ZP)(p.xv).withConfig({componentId:"sc-75f1fdf0-0"})(PaymentTypeSelector_styles_templateObject(),e=>e.theme.isDark?(0,M.DG)("white"):(0,M.DG)("gray8")),Z=P.ZP.div.withConfig({componentId:"sc-75f1fdf0-1"})(PaymentTypeSelector_styles_templateObject1()),N=(0,P.ZP)(p.zx).withConfig({componentId:"sc-75f1fdf0-2"})(styles_templateObject2(),(0,M.DG)("gray6")),B=(0,P.ZP)(F.Z).withConfig({componentId:"sc-75f1fdf0-3"})(_templateObject3(),e=>(0,M.DG)(e.$fill)),G=(0,P.ZP)(A.Z).withConfig({componentId:"sc-75f1fdf0-4"})(_templateObject4());var purchase_PaymentTypeSelector=e=>{var t;let{currentPaymentType:n,setCurrentPaymentType:r,onPurchaseSuccess:a,onPurchaseError:i,onPurchaseSubmit:o,onPurchaseCancel:s,requestInfo:u,isLoading:m,isDisabled:h,hideApplePay:y,setErrorCopy:g,shouldUsePaymentFormPrice:f,showHeading:C=!0}=e,{formatMessage:b}=(0,d.Z)(),{logEvent:P}=(0,E.z)(),_=(0,x.Hc)(),v={partner_id:null==_?void 0:_.id,partner_type:[(null==_?void 0:null===(t=_.category)||void 0===t?void 0:t.toLowerCase())||null]},[S,w]=(0,c.useState)(),[j,D]=(0,c.useState)(),onPaymentButtonClick=e=>{g(null),P({eventName:"Subscribe : Payment Type : Selected",eventProps:{payment_type:e,..._?v:{}}}),r(e)},M=[j,S].filter(e=>e).length,O="accessibleBrandGradient";return(0,l.jsxs)(l.Fragment,{children:[C&&(0,l.jsx)(I,{children:b(R.heading)}),(0,l.jsxs)(Z,{$numColumns:M,children:[!y&&(0,l.jsx)(purchase_ApplePayButton,{onClick:()=>onPaymentButtonClick("apple_pay"),isDisabled:h||m,onSubmit:o,onSuccess:a,onError:i,onCancel:s,requestInfo:u,isLoading:"apple_pay"===n&&m,setIsApplePayAvailable:w,children:"apple_pay"===n&&(0,l.jsx)(B,{$fill:O})}),(0,l.jsx)(purchase_GooglePayButton,{buttonBackgroundColor:"black",onClick:()=>onPaymentButtonClick("google_pay"),onSubmit:o,onSuccess:a,onError:i,onCancel:s,isLoading:"google_pay"===n&&m,isDisabled:h||m,requestInfo:u,setIsGooglePayAvailable:D,shouldUsePaymentFormPrice:f,children:"google_pay"===n&&(0,l.jsx)(B,{$fill:O})})]}),(0,l.jsx)(p.xv,{align:"center",el:"p",size:p.TS.base,weight:p.lq.Medium,children:b(R.or)}),(0,l.jsxs)(N,{"aria-label":b(R.ccButtonLabel),fullWidth:!0,backgroundColor:"white",textColor:"gray7",onPress:()=>onPaymentButtonClick("credit_card"),isDisabled:h||m,focusRingVariant:p.du.Dark,"data-testid":"subscribe-cc-button","aria-current":"credit_card"===n,children:["credit_card"===n&&(0,l.jsx)(B,{}),(0,l.jsx)(G,{"aria-hidden":!0}),b(R.ccButtonLabel)]})]})},q=n(47647),H=n(89523),V=n(8162),z=n(57243),U=n(35918),Y=(0,L.vU)({cardName:{id:"redesign.purchase.creditCardForm.cardName",defaultMessage:"Name on Credit Card",description:"CC Name Prompt"},email:{id:"generics.email",defaultMessage:"Email",description:"CC Email Prompt"},yourEmail:{id:"generics.yourEmail",defaultMessage:"Your Email",description:"CC Your Email"},emptyEmailError:{id:"generics.emptyEmail",defaultMessage:"Email is required!",description:"CC Email Required"},firstName:{id:"redesign.purchase.creditCardForm.nameOnCard",defaultMessage:"Name on Card",description:"CC Name on Card"},firstNameError:{id:"generics.nameOnCardError",defaultMessage:"Name on Card is required!",description:"CC Name Required"},emailError:{id:"giftCertificate.purchaseForm.emailError",defaultMessage:"Please enter a valid email address.",description:"CC Email Error"},expiryPlaceholder:{id:"redesign.purchase.creditCardForm.expiryPlaceholder",defaultMessage:"Exp (MM / YY)",description:"CC Expiry Prompt"},cvcPlaceholder:{id:"redesign.purchase.creditCardForm.cvcPlaceholder",defaultMessage:"CVC",description:"CC CVC Prompt"},postalCode:{id:"redesign.purchase.creditCardForm.postalCode",defaultMessage:"Billing Zip Code",description:"CC Zip Prompt"},failedCaptcha:{id:"redesign.purhcase.creditCardForm.failedCaptcha",defaultMessage:"Oops! Something went wrong. Please try again.",description:"CC Captcha Failed"},startFreeTrial:{id:"redesign.purchase.creditCardForm.button.startFreeTrial",defaultMessage:"Start Free Trial",description:"Default credit card form button text"},useCard:{id:"redesign.purchase.creditCardForm.button.useCard",defaultMessage:"Get Calm Premium",description:"Button text for already subbed"},success:{id:"redesign.purchase.creditCardForm.button.success",defaultMessage:"Success",description:"Button text for successful purchase"},samsungSubscribeLink:{id:"redesign.purchase.creditCardForm.samsungErrorLink",defaultMessage:"Redeem Regular Subscription",description:"A link to go to a subscribe page without a promotional price"},promotionTrialDurationSevenDays:{id:"promotionOptions.promotionTrialDurationSevenDays",defaultMessage:"Seven Day",description:"Description of a trial length of seven days"},promotionTrialDurationFourteenDays:{id:"promotionOptions.promotionTrialDurationFourteenDays",defaultMessage:"Fourteen Day",description:"Description of a trial length of fourteen days"},promotionTrialDurationOneMonth:{id:"promotionOptions.promotionTrialDurationOneMonth",defaultMessage:"One Month",description:"Description of a trial length of one month"},promotionTrialDurationTwoMonths:{id:"promotionOptions.promotionTrialDurationTwoMonths",defaultMessage:"Two Month",description:"Description of a trial length of two months"},promotionTrialDurationThreeMonths:{id:"promotionOptions.promotionTrialDurationThreeMonths",defaultMessage:"Three Month",description:"Description of a trial length of three months"},promotionTrialDurationSixMonths:{id:"promotionOptions.promotionTrialDurationSixMonths",defaultMessage:"Six Month",description:"Description of a trial length of six months"}});function PurchaseForm_styles_templateObject(){let e=(0,b._)(["\n	max-width: 750px;\n	text-align: ",";\n	width: 100%;\n"]);return PurchaseForm_styles_templateObject=function(){return e},e}function PurchaseForm_styles_templateObject1(){let e=(0,b._)(["\n	margin-top: 16px;\n"]);return PurchaseForm_styles_templateObject1=function(){return e},e}function PurchaseForm_styles_templateObject2(){let e=(0,b._)(["\n	width: 100%;\n	border-radius: ",";\n	justify-content: center;\n	display: flex;\n	color: ",";\n	background: ",";\n	padding: 8px;\n	transition: all ",";\n\n	&:hover {\n		background: ",";\n	}\n"]);return PurchaseForm_styles_templateObject2=function(){return e},e}let Q=P.ZP.div.withConfig({componentId:"sc-33fad9bb-0"})(PurchaseForm_styles_templateObject(),e=>e.$alignment),W=P.ZP.div.withConfig({componentId:"sc-33fad9bb-1"})(PurchaseForm_styles_templateObject1()),$=P.ZP.a.withConfig({componentId:"sc-33fad9bb-2"})(PurchaseForm_styles_templateObject2(),(0,M.rS)("buttons.borderRadius"),(0,M.DG)("white"),(0,M.DG)("gradientCalmBrand"),(0,M.rS)("animation.transition"),(0,M.DG)("gradientMountainLake"));var K=n(55946),purchase_PurchaseForm=e=>{var t,n,r;let{buttonBgColor:a="buttonBlue",buttonTextColor:i,onSuccess:o,ctaCopy:s,hideTerms:f,showLoggedInAs:C,purchaseTerms:b,isDisabled:P=!1,onLogout:_,onPurchase:v,hidePriceAfterDisclaimer:S=!0,centerFormElements:w=!1,analyticsPrefix:j="Subscribe : Purchase : Form",children:D=null,initialNameValue:M="",ignoreSubscribeErrors:O=!1,updateUserOnSuccess:T=!0,hideAlternativePaymentMethods:k=!1,hidePaypal:L=!1,hideApplePay:R=!1,alignment:F="left",ignoreSuccessLogging:A=!1,isSecondFreeTrial:I=!1,hideBillingAddressFields:Z=!1,isMonthlyPricingTest:N=!1,shouldUsePaymentFormPrice:B,...G}=e,X=null!==(n=G.email)&&void 0!==n?n:null,J=(0,x.lh)(),ee=(0,x.Fd)(),et=(0,x.ec)(),en=(0,u.I0)(),{formatMessage:er}=(0,d.Z)(),{logEvent:ea}=(0,E.z)(),ei=(0,z.A)(),[eo,es]=(0,c.useState)(!1),[el,ec]=(0,c.useState)(!1),[ed,eu]=(0,c.useState)(K.gk),[ep,em]=(0,c.useState)(M),[eh,ey]=(0,c.useState)(k?"credit_card":null),[eg,ef]=(0,c.useState)(""),[eC,eb]=(0,c.useState)(!1),[eP]=(0,c.useState)(!O&&V.i3.filter(e=>!I||"previously-trialed"!==e).includes(null==ee?void 0:null===(t=ee.purchaseType)||void 0===t?void 0:t.type));(0,c.useEffect)(()=>{eb(ed===K.eL||ed===K.e0)},[ed]);let onPurchaseError=e=>{eu(K.gk),"string"==typeof e&&ef(e),ef(er((0,H.S)(e))),"promotion_already_redeemed"===e.code&&es(!0)},onPurchaseSubmit=e=>(eu(K.eL),v(e)),onPurchaseSuccess=async(e,t)=>{ec(!0),eu(K.e0);let n={...et,...e,id:null==et?void 0:et.id,subscription:e};T&&en((0,U.a)(n)),A||await ei({analyticsPrefix:j,newUser:n,paymentType:t}),o()},createRequestInfo=()=>{let e=X||(null==et?void 0:et.email);return{name:ep,...e?{email:e}:{}}};if(!J)return(0,l.jsx)(m.Z,{});if(eP)return(0,l.jsx)(g.Z,{errorType:null==ee?void 0:null===(r=ee.purchaseType)||void 0===r?void 0:r.type});let e_="credit_card"===eh;return eo&&(e_=!1),(0,l.jsxs)(Q,{$alignment:F,id:"purchase-form",children:[!k&&"credit_card"!==eh&&(0,l.jsx)(purchase_PaymentTypeSelector,{currentPaymentType:eh,setCurrentPaymentType:ey,onPurchaseSuccess:onPurchaseSuccess,onPurchaseError:onPurchaseError,onPurchaseSubmit:onPurchaseSubmit,onPurchaseCancel:(e,t)=>{eu(K.gk),ea({eventName:"".concat(j," : Cancelled"),eventProps:{error:e,payment_type:t}}),ey(null)},requestInfo:createRequestInfo(),isLoading:eC,isDisabled:P,hidePaypal:L,hideApplePay:R,setErrorCopy:ef,isMonthlyPricingTest:N,shouldUsePaymentFormPrice:B}),e_?(0,l.jsx)(h.Z,{buttonBgColor:a,buttonTextColor:i,ctaCopy:s,hideTerms:f,hidePriceAfterDisclaimer:S,centerFormElements:w,analyticsPrefix:j,purchaseState:ed,firstName:ep,setFirstName:em,setErrorCopy:ef,requestInfo:createRequestInfo(),onPurchaseSubmit:onPurchaseSubmit,onPurchaseError:onPurchaseError,onPurchaseSuccess:onPurchaseSuccess,purchaseTerms:b||"",isDisabled:P,setCurrentPaymentType:ey,hideBillingAddressFields:Z,children:D}):!f&&!eo&&(0,l.jsx)(q.Z,{hidePriceAfterDisclaimer:S,purchaseTerms:b}),D,C&&(0,l.jsx)(y.Z,{onLogout:_,email:X}),el&&(0,l.jsx)(W,{children:(0,l.jsx)(p.qX,{isSuccess:!0,onClick:()=>ec(!1),describedBy:"purchase-form",children:er(Y.success)})}),eg&&(0,l.jsx)(W,{children:(0,l.jsx)(p.qX,{isSuccess:!1,onClick:()=>ef(null),describedBy:"purchase-form",children:eg})}),eo&&(0,l.jsx)($,{href:"/samsung/subscribe?calmjwt=".concat(ee.calmjwt),children:er(Y.samsungSubscribeLink)})]})}}}]);
//# sourceMappingURL=5643-86c1d302bfb43d23.js.map